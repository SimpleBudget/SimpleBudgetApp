<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:include="partials :: head('Home | Simple Budget')"/>
    <link rel="stylesheet" th:href="@{/css/profile.css}" />

</head>
<body>
<nav th:replace="partials :: navbar"/>
<div>
<h1 th:text="'Welcome, ' + ${user.username}"></h1>

<div class="card text-center color-white" id="main-card">
<h3  class="card-header" th:if="${account != null}">Your monthly income</h3>
    <div class="card-body">
<p th:if="${account != null}" id="monthlyIncome" th:text="${account.getIncome()}"></p>
    </div>

    <h3  class="card-header" th:if="${account != null}">Your Current Savings</h3>
    <div class="card-body">
        <p th:if="${account != null}" id="overallSavings" th:text="${account.getSavings()}"></p>
    </div>

<h3  class="card-header" th:if="${bills.size() >= 1}">Your bills</h3>
<div class="card-body" th:each="bill : ${bills}">
    <h4 th:text="${bill.name}"></h4>
    <p th:text="${bill.amount}"></p>
</div>
    <div class="card-body">
<h3 th:if="${billTotal > 0}"  class="card-header">Total of your Bills</h3>
<p th:if="${billTotal > 0}" id="billTotal" th:text="${billTotal}"></p>
<h3 th:if="${billTotal > 0}"  class="card-header">Money left over after your bills</h3>
<p th:if="${billTotal > 0}" id="moneyAfterBills" th:text="${moneyAfterBills}"></p>
<h4 class="card-header" th:if="${account != null &amp;&amp; account.option == 1 &amp;&amp; bills.size() >= 1}"   th:text="'You need to save: ' + ${billTotal/4} + ' per paycheck to have enough to pay your bills by the end of the month.'"></h4>
<h4 class="card-header" th:if="${account != null &amp;&amp; account.option == 2 &amp;&amp; bills.size() >= 1}"   th:text="'You need to save: ' + ${billTotal/2} + ' per paycheck to have enough to pay your bills by the end of the month.'"></h4>
<h4 class="card-header" th:if="${account != null &amp;&amp; account.option == 3 &amp;&amp; bills.size() >= 1}"   th:text="'You need to save: ' + ${billTotal}  + ' per paycheck to have enough to pay your bills by the end of the month.'"></h4>
<h4 class="card-header" th:if="${billTotal > 0}" id="spendAmount"></h4>

<a href="/account-setup"><button th:if="${account == null}">setup your account!</button></a>
<a href="/account-setup"><button th:if="${account != null}">edit your account!</button></a>
</div>
</div>



<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script th:src="@{js/Chart.js}"></script>
</div>
<div id="piechart"></div>
<div class="jumbotron jumbotron-fluid">
<h1>User information</h1>
<h2 th:text="${user.username}"></h2>
<h2 th:text="${user.email}"></h2>
<h2 th:text="${user.phonenumber}"></h2>
</div>
</body>
<footer th:replace="partials :: footer"/>

</html>
